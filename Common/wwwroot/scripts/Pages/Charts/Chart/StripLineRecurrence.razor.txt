@page "/chart/recurrence-strip-line"

@using Syncfusion.Blazor
@*Hidden:Lines*@
@using ThemeHelper
@*End:Hidden*@
@using Syncfusion.Blazor.Charts
@using Syncfusion.Blazor.Buttons

@inject NavigationManager NavigationManager
@*Hidden:Lines*@
@inherits SampleBaseComponent


@*End:Hidden*@

<ActionDescription>
<p>This sample demonstrates how to create repeating strip lines in a chart for regular interval highlighting.</p>

<p>In this example, you can see how to render and configure recurring strip lines. To create repeating strip lines, configure the following properties in the <code>ChartStripline</code> component:</p>
<ul>
  <li><a target='_blank' href='https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Charts.ChartStripline.html#Syncfusion_Blazor_Charts_ChartStripline_StartFromAxis' aria-label="Navigate to the StartFromAxis property reference for chart strip-line">StartFromAxis</a> - Defines the starting point relative to the axis</li>
  <li><a target='_blank' href='https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Charts.ChartStripline.html#Syncfusion_Blazor_Charts_ChartStripline_Size' aria-label="Navigate to the Size property reference for chart strip-line">Size</a> - Specifies the width of each strip line</li>
  <li><a target='_blank' href='https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Charts.ChartStripline.html#Syncfusion_Blazor_Charts_ChartStripline_IsRepeat' aria-label="Navigate to the IsRepeat property reference for chart strip-line">IsRepeat</a> - Enables the recurrence feature</li>
  <li><a target='_blank' href='https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Charts.ChartStripline.html#Syncfusion_Blazor_Charts_ChartStripline_RepeatEvery' aria-label="Navigate to the RepeatEvery property reference for chart strip-line">RepeatEvery</a> - Sets the interval between strip line repetitions</li>
</ul>

<p><code>Tooltip</code> is enabled in this example. To see tooltip details, hover over or tap a data point on touch-enabled devices.</p>

<p>More information about strip lines can be found in this <a target='_blank' href='https://blazor.syncfusion.com/documentation/chart/strip-line' aria-label="Navigate to the documentation for strip-line in chart component">documentation section</a>.</p>
</ActionDescription>

<div class="col-lg-8 control-section">
    <SfChart @ref="ChartRef" Title="World Pollution Report" Theme="@Theme">
        <ChartTitleStyle TextOverflow="TextOverflow.Wrap"></ChartTitleStyle>
        <ChartArea>
            <ChartAreaBorder Width="0"></ChartAreaBorder>
        </ChartArea>
        <ChartPrimaryXAxis  IntervalType="IntervalType.Years" EdgeLabelPlacement="EdgeLabelPlacement.Shift" LabelIntersectAction="LabelIntersectAction.Trim" ValueType="Syncfusion.Blazor.Charts.ValueType.DateTime" Minimum="new DateTime(1965,1,1)" Maximum="new DateTime(2010,1,1)">
            <ChartAxisMajorGridLines Width="0"></ChartAxisMajorGridLines>
            <ChartStriplines>
                <ChartStripline Visible="@XAxis" StartFromAxis="true" Size="5" SizeType="SizeType.Years" IsRepeat="true" RepeatEvery="10" Color="rgba(167,169,171, 0.1)"></ChartStripline>
            </ChartStriplines>
        </ChartPrimaryXAxis>
        <ChartPrimaryYAxis Minimum="0" Maximum="18000" Interval="2000">
            <ChartAxisMajorGridLines Color="rgba(167,169,171, 0.3)"></ChartAxisMajorGridLines>
            <ChartAxisMajorTickLines Width="0"></ChartAxisMajorTickLines>
            <ChartAxisLineStyle Width="0"></ChartAxisLineStyle>
            <ChartAxisLabelStyle Color="transparent"></ChartAxisLabelStyle>
            <ChartStriplines>
                <ChartStripline StartFromAxis="true" Size="2000" IsRepeat="true" RepeatEvery="4000" Visible="@YAxis" Color="rgba(167,169,171, 0.1)"></ChartStripline>
            </ChartStriplines>
        </ChartPrimaryYAxis>
        <ChartSeriesCollection>
            <ChartSeries Name="All sources" Type="ChartSeriesType.Column" ColumnSpacing="0.1" DataSource="@PollutionReports" XName="Period" YName="PollutionRate1" Width="2">
                <ChartCornerRadius TopLeft="4" TopRight="4"></ChartCornerRadius>
            </ChartSeries>
            <ChartSeries Name="Autos & Light Trucks" Type="ChartSeriesType.Column" ColumnSpacing="0.1" DataSource="PollutionReports" XName="Period" YName="PollutionRate2" Width="2">
                <ChartCornerRadius TopLeft="4" TopRight="4"></ChartCornerRadius>                
            </ChartSeries>
        </ChartSeriesCollection>
        <ChartTooltipSettings Enable="true" Format=" Year: <b>${point.x}</b> <br> Tons Per Day: <b>${point.y}</b>" EnableHighlight="true"></ChartTooltipSettings>
        <ChartLegendSettings EnableHighlight="true"></ChartLegendSettings>
    </SfChart>
</div>

<PropertyPanel ControlSecClass="col-lg-8" CollapseChanged="HandlePanelCollapseChangedAsync" InitialRefresh="HandlePanelCollapseChangedAsync">
            <table style="width: 100%">
                <tr style="height: 50px">
                    <td style="width: 80%">
                        X Axis Striplines:
                    </td>
                    <td>
                        <SfCheckBox Checked="@XAxis" ValueChange="@CheckedXAxis" TChecked="bool"></SfCheckBox>
                    </td>
                </tr>
                <tr style="height: 50px">
                    <td style="width: 80%">
                        Y Axis Striplines:
                    </td>
                    <td>
                        <SfCheckBox Checked="@YAxis" ValueChange="@CheckedYAxis" TChecked="bool"></SfCheckBox>
                    </td>
                </tr>
            </table>
</PropertyPanel>

@code{

    private SfChart? ChartRef { get; set; }
    private Theme Theme { get; set; }
    public List<StripLineData> PollutionReports { get; set; } = new List<StripLineData>
    {
        new StripLineData { Period = new DateTime(1970, 1, 1), PollutionRate1 = 16500, PollutionRate2 = 8000 },
        new StripLineData { Period = new DateTime(1975, 1, 1), PollutionRate1 = 16000, PollutionRate2 = 7600 },
        new StripLineData { Period = new DateTime(1980, 1, 1), PollutionRate1 = 15400, PollutionRate2 = 6400 },
        new StripLineData { Period = new DateTime(1985, 1, 1), PollutionRate1 = 15800, PollutionRate2 = 3700 },
        new StripLineData { Period = new DateTime(1990, 1, 1), PollutionRate1 = 14000, PollutionRate2 = 7200 },
        new StripLineData { Period = new DateTime(1995, 1, 1), PollutionRate1 = 10500, PollutionRate2 = 2300 },
        new StripLineData { Period = new DateTime(2000, 1, 1), PollutionRate1 = 13300, PollutionRate2 = 4000 },
        new StripLineData { Period = new DateTime(2005, 1, 1), PollutionRate1 = 12800, PollutionRate2 = 4800 }
    };
    private Boolean XAxis = true, YAxis = true;

    protected override void OnInitialized()
    {
        
        Theme = ThemeHelper.GetCurrentTheme(NavigationManager.Uri);
    }

    private void CheckedXAxis(ChangeEventArgs<bool> args)
    {
        XAxis = args.Checked;
    }

    private void CheckedYAxis(ChangeEventArgs<bool> args)
    {
        YAxis = args.Checked;
    }

    public class StripLineData
    {
        public DateTime Period { get; set; }
        public double PollutionRate1 { get; set; }
        public double PollutionRate2 { get; set; }
    }

    /// <summary>
    /// EventCallback handler - invoked when PropertyPanel is expanded/collapsed
    /// This is triggered by CollapseChanged EventCallback from PropertyPanel
    /// </summary>
    public async Task HandlePanelCollapseChangedAsync()
    {
        if (ChartRef != null)
        {
            await ChartRef.RefreshAsync(false);
        }
    }
}
