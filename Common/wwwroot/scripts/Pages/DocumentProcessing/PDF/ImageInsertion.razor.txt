@page "/pdf/image-insertion"
@inject Microsoft.JSInterop.IJSRuntime JS
@using System.IO
@using Syncfusion.Blazor.Buttons
@inject HttpClient Http
@*Hidden:Lines*@
@inherits SampleBaseComponent

@using BlazorDemos.Data.FileFormats.PDF

@*End:Hidden*@
@*Hidden:Lines*@
@inject NavigationManager NavigationManager


@*End:Hidden*@

<SampleDescription>
   <p style="font-size:16px">This sample demonstrates insertion of various raster and vector images (JPEG, PNG, TIFF, EMF, and GIF) in the PDF document. This sample also demonstrates the image masking capability in the Essential PDF library.</p> 
</SampleDescription>
<ActionDescription>
   <p style="font-size:16px">It is also possible to rotate and paginate the images in the PDF document. More information about the images can be found in this documentation <a target='_blank'
href='https://help.syncfusion.com/file-formats/pdf/working-with-images?_ga=2.150744822.1703522802.1584005056-1302582622.1556169414' aria-label="Documentation Section"> section.</a></p>
</ActionDescription>

<div class="control-section">
    <p style="font-size:16px">Click the button to view a PDF document generated by Essential PDF. Please note that Adobe Reader or its equivalent is required to view the resultant document. </p>

    <div class="button-section">
        <div id="button-control">
            <div class="row">
                <div>
                    <SfButton @onclick="ImageInsertionPDF">Insert Image</SfButton>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .radio-control {
        margin: 0 0 5% 0;
    }

    .control-section .row {
        margin: 10px 0;
    }
</style>

@code {
    
    
    /// <summary>
    /// Create and download the simple PDF document
    ///<summary>
    protected async void ImageInsertionPDF(MouseEventArgs args)
    {	
        Dictionary<string, MemoryStream> fileData = new Dictionary<string, MemoryStream>();
        string fileDataPath = NavigationManager.BaseUri + SampleService.WebAssetsPath;
        byte[] data = await Http.GetByteArrayAsync(fileDataPath + "data/pdf/xamarin-jpeg.jpg");
        fileData.Add("xamarin-jpeg.jpg", new MemoryStream(data));
        data = await Http.GetByteArrayAsync(fileDataPath + "images/pdf/xamarin-png.png");
        fileData.Add("xamarin-png.png", new MemoryStream(data));
        ImageInsertionService service = new ImageInsertionService(fileData);
        MemoryStream documentStream = service.ImageInsertionPDF();
        service.Close();
        await JS.SaveAs("ImageInsertion.pdf", documentStream.ToArray());
    }
}
