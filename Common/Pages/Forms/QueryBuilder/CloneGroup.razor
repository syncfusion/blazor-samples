@page "/query-builder/clone-group"

@using Syncfusion.Blazor.QueryBuilder

@*Hidden:Lines*@
@inherits SampleBaseComponent
@using blazor_griddata
@*End:Hidden*@

<SampleDescription>
    <p>This sample demonstrates the clone functionality support provided by the Query Builder component. By clicking the clone button, users can easily duplicate an existing group or rule within the query structure. </p>
</SampleDescription>
<ActionDescription>
    <p>
        The <code><a target="_blank" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.QueryBuilder.SfQueryBuilder-1.html">QueryBuilder</a></code> component is used to create or edit filters. You can edit filters by changing the fields. The clone option will create an exact replica of a rule or group next to the original.
    </p>
    <p>In mobile mode, the component is displayed vertically for better responsiveness.</p>
    <p>More information about the Blazor QueryBuilder component can be found in this <a target="_blank" href="https://blazor.syncfusion.com/documentation/query-builder/getting-started/" aria-label="documentation section">documentation</a> section.</p>
</ActionDescription>


<div class="col-lg-12 control-section">
    <SfQueryBuilder DataSource="@OrderRecords">
        <QueryBuilderRule Condition="and" Rules="@InitialRules"></QueryBuilderRule>
        <QueryBuilderShowButtons CloneGroup="true" CloneRule="true"></QueryBuilderShowButtons>
        <QueryBuilderColumns>
            <QueryBuilderColumn Field="CustomerID" Label="Customer ID" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.String></QueryBuilderColumn>
            <QueryBuilderColumn Field="EmployeeID" Label="Employee ID" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.Number></QueryBuilderColumn>
            <QueryBuilderColumn Field="Verified" Label="Verified" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.Boolean></QueryBuilderColumn>
            <QueryBuilderColumn Field="ShipName" Label="Ship Name" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.String></QueryBuilderColumn>
            <QueryBuilderColumn Field="OrderDate" Label="Order Date" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.Date Format="dd/MM/yyyy"></QueryBuilderColumn>
            <QueryBuilderColumn Field="ShipCountry" Label="Ship Country" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.String></QueryBuilderColumn>
            <QueryBuilderColumn Field="ShipAddress" Label="Ship Address" Type=Syncfusion.Blazor.QueryBuilder.ColumnType.String></QueryBuilderColumn>
        </QueryBuilderColumns>
    </SfQueryBuilder>
</div>

@code {

    private List<RuleModel> InitialRules { get; set; } = new List<RuleModel>
    {
        new RuleModel { Label = "Employee ID", Field = "EmployeeID", Type = "Number", Operator = "equal", Value = 1001 },
        new RuleModel { Label = "Customer ID", Field = "CustomerID", Type = "String", Operator = "equal", Value = "FLKIN" },
        new RuleModel
        {
            Condition = "or",
            Rules = new List<RuleModel>
            {
                new RuleModel { Label = "Order Date", Field = "OrderDate", Type = "Date", Operator = "equal", Value = "12/1/2024" },
                new RuleModel { Label = "Ship Country", Field = "ShipCountry", Type = "String", Operator = "equal", Value = "USA" }
            }
        }
    };

    private List<Orders> OrderRecords { get; set; }

    protected override void OnInitialized()
    {
        OrderRecords = Orders.GetAllRecords();
    }

}

<style>

    .e-query-builder {
        margin: 0 auto;
    }

    .material3 .e-query-builder .e-group-header .e-group-action .e-btn,
    .material3-dark .e-query-builder .e-group-header .e-group-action .e-btn { 
        box-shadow: none; 
    }

    .fluent .e-query-builder .e-group-header .e-group-action .e-btn { 
        background: #f3f2f1;
        border: 0 solid #f3f2f1;
    }

    .bootstrap5 .e-query-builder .e-group-header .e-group-action .e-btn { 
        background: #fff;
        box-shadow: none;
        color: #6c757d;
    }
</style>