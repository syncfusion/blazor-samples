@page "/TimePicker/Time-Duration"

@using Syncfusion.Blazor.Calendars;

@*Hidden:Lines*@
@inherits SampleBaseComponent;
@*End:Hidden*@
<ActionDescription>
<p>
    This sample demonstrates the popup list element in specific time duration. Click or touch the TimePicker popup icon to select the desired value.
  </p>
  <p>
    The Time Duration example shows how to customize or disable time values in the popup list using the <a href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Calendars.TimePickerEvents-1.html#Syncfusion_Blazor_Calendars_TimePickerEvents_1_OnItemRender" target="_blank" rel="noopener" aria-label="Class reference of OnItemRender event in TimePicker">OnItemRender</a> event. In this example, all time values have additional information on duration between them in sequence, and some values are disabled by adding the <strong>e-disabled</strong> class.
  </p>
  <p>
    Using the <a href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Calendars.SfTimePicker-1.html#Syncfusion_Blazor_Calendars_SfTimePicker_1_ScrollTo" target="_blank" rel="noopener" aria-label="Class reference of ScrollTo property in TimePicker">ScrollTo</a> property, you can set the scroll position to the given value when no value is selected or the selected value is not available in the timepicker popup list.
  </p>
</ActionDescription>


<div class="control-section col-lg-12">
    <div class="control-wrapper">
        <label class="example-label">Select a Time</label>
        <SfTimePicker TValue="DateTime?" ScrollTo="@ScrollValue" @ref="@TimePickerObj" ShowClearButton="true" FullScreen="true" Placeholder="Selecy a time">
            <TimePickerEvents TValue="DateTime?" OnItemRender="@ItemRenderHandler" OnOpen="@OpenHandler"></TimePickerEvents>
        </SfTimePicker>
    </div>
</div>

<style>
    .control-wrapper {
        max-width: 200px;
        margin: 0 auto;
        padding: 50px 0px 0px;
    }

    .example-label {
        font-size: 14px;
        margin-bottom: 6px;
    }
</style>

@code {
    private SfTimePicker <DateTime?>? TimePickerObj;
    private DateTime? ScrollValue { get; set; }
    private DateTime? StartTime;
    private TimeSpan? Minutes;
    
    private void OpenHandler(PopupEventArgs args)
    {
        if (TimePickerObj != null && TimePickerObj.Value != null)
        {
            ScrollValue = TimePickerObj.Value;
        }
    }
    private void ItemRenderHandler(ItemEventArgs<DateTime?> args)
    {
        if (args.Value != null && args.Value.Value.Hour == 0 && args.Value.Value.Minute == 0 && args.Value.Value.Second == 0)
        {
            StartTime = args.Value;
        }
        Minutes = (args.Value - StartTime) / 60000;
        if (Minutes != null && (Minutes.Value.TotalMilliseconds / 60) % 3 == 0)
        {
            args.IsDisabled = true;
        }
    }
}