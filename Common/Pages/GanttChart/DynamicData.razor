@page "/gantt-chart/dynamic-data"

@using Syncfusion.Blazor.Gantt
@using System.Dynamic

@*Hidden:Lines*@
@inject SampleService SampleService
@implements IDisposable
@*End:Hidden*@

<ActionDescription>
    <p>
        This sample demonstrates <code>DynamicObject</code> data binding in the <a class="e-gantt-dynamicdata-reference-link" aria-label="Navigate to the explore Syncfusion Blazor Gantt Chart component"
                                                                      href="https://www.syncfusion.com/blazor-components/blazor-gantt-chart"
                                                                      target="_blank" rel="noopener">Blazor Gantt Chart</a>. Project records are supplied at runtime without a fixed schema, making it possible to surface fields defined by the underlying dynamic model.
    </p>

    <p>
        Core productivity features remain available while working with dynamic data. The chart supports add, update, and delete operations, full hierarchy expansion and collapse, and column sorting so that flexible data shapes can be managed with the same tools provided for strongly typed sources.
    </p>

    <p>
        Bind a <code>DynamicObject</code> collection by assigning it to the
        <a class="e-gantt-dynamicdata-reference-link" aria-label="Navigate to the DataSource property reference for Gantt chart rows"
           href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Gantt.SfGantt-1.html#Syncfusion_Blazor_Gantt_SfGantt_1_DataSource"
           target="_blank" rel="noopener">DataSource</a> property.
        Override the
        <a class="e-gantt-dynamicdata-reference-link" aria-label="Navigate to the Microsoft documentation for GetDynamicMemberNames method"
           href="https://learn.microsoft.com/en-us/dotnet/api/system.dynamic.dynamicobject.getdynamicmembernames?view=net-8.0"
           target="_blank" rel="noopener">GetDynamicMemberNames</a>
        method in the <code>DynamicObject</code> implementation to return the member names that should participate in rendering, editing, and other data operations.
    </p>

    <p>
        For further details, refer to the 
        <a class="e-gantt-dynamicdata-reference-link" aria-label="Navigate to the documentation for DynamicObject binding in the Gantt chart component"
           href="https://blazor.syncfusion.com/documentation/gantt-chart/data-binding/#dynamicobject-binding"
           target="_blank" rel="noopener">documentation</a>.
    </p>
</ActionDescription>

<div class="control-section e-gantt-dynamic-data-sample">
    <SfGantt @ref="GanttInstance" DataSource="@GanttDynamicData" Height="450px" Width="100%" TreeColumnIndex="1" HighlightWeekends="true" AllowSorting="true" ProjectStartDate="@(new DateTime(2021, 01, 04))"
			 Toolbar="@(new List<string>() { "Add", "Edit", "Update", "Delete", "Cancel", "ExpandAll", "CollapseAll" })" ProjectEndDate="@(new DateTime(2021, 03, 07))">
		<GanttTaskFields Id="TaskId" Name="TaskName" StartDate="StartDate" EndDate="EndDate" Progress="Progress" Duration="Duration" ParentID="ParentId"></GanttTaskFields>
		<GanttColumns>
			<GanttColumn Field="TaskId" HeaderText="Task ID"></GanttColumn>
			<GanttColumn Field="TaskName" HeaderText="Task Name"></GanttColumn>
			<GanttColumn Field="StartDate" HeaderText="Start Date"></GanttColumn>
			<GanttColumn Field="Duration" HeaderText="Duration"></GanttColumn>
			<GanttColumn Field="Progress" HeaderText="Progress"></GanttColumn>
		</GanttColumns>
		<GanttEditSettings AllowAdding="true" AllowEditing="true" AllowDeleting="true" AllowTaskbarEditing="true" ShowDeleteConfirmDialog="true"></GanttEditSettings>
		<GanttLabelSettings LeftLabel="TaskName" TValue="DynamicDictionary"></GanttLabelSettings>
	</SfGantt>
</div>
@code{

    /// <summary>
    /// Initializes the sample by generating dynamic Gantt data.
    /// </summary>
    protected override void OnInitialized()
    {
        GanttDynamicData = GetData().ToList();
        @*Hidden:Lines*@
        SampleService.TouchMousePreferenceChanged += OnTouchMousePreferenceChanged;
        @*End:Hidden*@
    }
    @*Hidden:Lines*@
    private async void OnTouchMousePreferenceChanged()
    {
        await GanttInstance.RefreshAsync();
        await GanttInstance.CallStateHasChangedAsync();
    }

    public void Dispose()
    {
        SampleService.TouchMousePreferenceChanged -= OnTouchMousePreferenceChanged;
    }
    @*End:Hidden*@
}
<style>
	.container-fluid {
		padding: 0px !important;
	}

	.e-gantt-dynamic-data-sample {
		padding: 20px;
	}

    .e-gantt-dynamicdata-reference-link {
        text-decoration: none !important;
    }

    .e-gantt-dynamicdata-reference-link:hover,
    .e-gantt-dynamicdata-reference-link:focus {
        text-decoration: underline !important;
    }
</style>