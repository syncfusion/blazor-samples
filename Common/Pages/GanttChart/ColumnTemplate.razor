@page "/gantt-chart/column-template"

@using Syncfusion.Blazor.Gantt
@using BlazorDemos.Pages.GanttChart.Data

@inject NavigationManager UriHelper
@*Hidden:Lines*@
@inherits SampleBaseComponent
@inject SampleService SampleService
@implements IDisposable
@*End:Hidden*@


<SampleDescription>
	<p>
		This sample demonstrates column templating in the <a class="e-gantt-columntemplate-reference-link" aria-label="Navigate to the explore Syncfusion Blazor Gantt Chart component"
													   href="https://www.syncfusion.com/blazor-components/blazor-gantt-chart"
													   target="_blank">Blazor Gantt Chart</a>.
		Custom layouts are applied to individual grid cells so task metadata can be presented with richer visuals than the default text rendering.
	</p>

	<p>
		The resource column demonstrates this capability by combining employee photos with contextual details. Templates are supplied inline with the column definition, making it easy to align the grid presentation with project identity or branding requirements.
	</p>

	<p>
		Column templating is configured through the
		<a class="e-gantt-columntemplate-reference-link" aria-label="Navigate to the class reference for GanttColumn"
		   href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Gantt.GanttColumn.html"
		   target="_blank">GanttColumn</a>
		componentâ€™s
		<a class="e-gantt-columntemplate-reference-link" aria-label="Navigate to the Template property reference for Gantt column"
		   href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Gantt.GanttColumn.html#Syncfusion_Blazor_Gantt_GanttColumn_Template"
		   target="_blank">Template</a>
		property, which exposes each row through the implicit <code>Context</code> parameter.
	</p>
	<p>
		For further details, refer to the
		<a class="e-gantt-columntemplate-reference-link" aria-label="Navigate to the documentation for column template in the Gantt chart component"
		   href="https://blazor.syncfusion.com/documentation/gantt-chart/column-template"
		   target="_blank">documentation</a>.
	</p>
</SampleDescription>

<div class="control-section e-gantt-column-template-sample">
	<SfGantt @ref="GanttInstance" DataSource="@TaskCollection" Height="450px" Width="100%" RowHeight="60" TreeColumnIndex="1"
			 ProjectStartDate="@(new DateTime(2021, 3, 23))" ProjectEndDate="@(new DateTime(2021, 7, 28))" WorkUnit="WorkUnit.Hour">
		<GanttTaskFields Id="TaskId" Name="TaskName" StartDate="StartDate" EndDate="EndDate"
						 Duration="Duration" Progress="Progress" ParentID="ParentId" TaskType="TaskType">
		</GanttTaskFields>
		<GanttColumns>
			<GanttColumn Field="TaskId" HeaderText="ID" Visible="false"></GanttColumn>
			<GanttColumn Field="TaskName" HeaderText="Task Name"
						 ClipMode="Syncfusion.Blazor.Grids.ClipMode.EllipsisWithTooltip" Width="250px"></GanttColumn>
			<GanttColumn Field="ResourceName" HeaderText="Resources"
						 ClipMode="Syncfusion.Blazor.Grids.ClipMode.EllipsisWithTooltip" Width="250px">
				<Template>
					@{
						var taskData = context as ColumnTemplateData.TaskData;
						if (!string.IsNullOrEmpty(taskData?.ResourceName))
						{
							var resourceName = taskData.ResourceName.Trim().Replace(" ", "").ToLower();
							<div class="image">
								<img role="presentation"
									 src="@UriHelper.ToAbsoluteUri($"{SampleService.WebAssetsPath}images/gantt/{resourceName}.png")" />
								<div style="display:inline-block;width:100%;position:relative;left:30px">
									@(taskData.ResourceName)
								</div>
							</div>
						}
					}
				</Template>
			</GanttColumn>
			<GanttColumn Field="Duration" HeaderText="Duration"></GanttColumn>
			<GanttColumn Field="TaskType" HeaderText="Task Type"></GanttColumn>
			<GanttColumn Field="StartDate" HeaderText="Start Date"></GanttColumn>
			<GanttColumn Field="EndDate" HeaderText="End Date"></GanttColumn>
		</GanttColumns>
		<GanttLabelSettings LeftLabel="TaskName" TValue="ColumnTemplateData.TaskData"></GanttLabelSettings>
		<GanttSplitterSettings Position="50%"></GanttSplitterSettings>
	</SfGantt>
</div>

@code {
	public List<ColumnTemplateData.TaskData> TaskCollection { get; set; } = new List<ColumnTemplateData.TaskData>();
	public SfGantt<ColumnTemplateData.TaskData>? GanttInstance { get; set; }

	/// <summary>
	/// Initializes the sample by loading task data for the Gantt chart.
	/// </summary>
	protected override void OnInitialized()
	{
		TaskCollection = ColumnTemplateData.GetTaskCollection();
		@*Hidden:Lines*@
		SampleService.TouchMousePreferenceChanged += OnTouchMousePreferenceChanged;
		@*End:Hidden*@
	}
	@*Hidden:Lines*@
	private async void OnTouchMousePreferenceChanged()
	{
		await GanttInstance.RefreshAsync();
		await GanttInstance.CallStateHasChangedAsync();
	}

	public void Dispose()
	{
		SampleService.TouchMousePreferenceChanged -= OnTouchMousePreferenceChanged;
	}
	@*End:Hidden*@
}
<style>
	.container-fluid {
		padding: 0px !important;
	}

	.e-gantt-column-template-sample {
		padding: 20px;
	}

	.e-gantt-columntemplate-reference-link {
		text-decoration: none !important;
	}

	.e-gantt-columntemplate-reference-link:hover,
	.e-gantt-columntemplate-reference-link:focus {
		text-decoration: underline !important;
	}
</style>
