@page "/gantt-chart/human-resource-management"

@using Syncfusion.Blazor.DropDowns
@using Syncfusion.Blazor.Gantt
@using Syncfusion.Blazor.Grids
@using Syncfusion.Blazor.Navigations
@using Syncfusion.Blazor.Schedule
@using Syncfusion.Blazor.SplitButtons
@using BlazorDemos.Pages.GanttChart.Data
@using static BlazorDemos.Pages.GanttChart.Data.HumanResourceData;

@inject NavigationManager Navigation
@*Hidden:Lines*@
@inject SampleService SampleService
@implements IDisposable
@*End:Hidden*@

<ActionDescription>
    <p>
		This sample demonstrates a human resource management roadmap using the <a class="e-gantt-humanresourcemanagement-reference-link" aria-label="Navigate to the explore Syncfusion Blazor Gantt Chart component"
                                                                                  href="https://www.syncfusion.com/blazor-components/blazor-gantt-chart"
                                                                                  target="_blank" rel="noopener">Blazor Gantt Chart</a>.
        Talent acquisition, onboarding, training, performance evaluation, and retention initiatives appear as structured phases, revealing the cadence of HR programs across the planning horizon.
    </p>

    <p>
        Each phase encapsulates related activities with defined start dates, end dates, durations, dependencies, and completion states.
    </p>

    <p>
        The visualization highlights hierarchical task relationships, progress tracking, and delivering a unified perspective on workforce planning commitments. It demonstrates how the Gantt layout clarifies schedule risk, keeps compliance deliverables on track, and surfaces remaining workload within human resource operations.
    </p>

    <p>
        The agenda view of the scheduler component complements this by clearly displaying day-to-day human resource work details. <a class="e-gantt-humanresourcemanagement-reference-link" href="https://blazor.syncfusion.com/demos/scheduler/overview?theme=fluent">SfScheduler</a> is a component designed to present HR activities in a structured and interactive format.
    </p>
</ActionDescription>

<section class="control-section e-gantt-human-resource-sample">
	<div style="height:600px">
		<div class="e-gantt-chart-human-resource">
			<div class="e-gantt-human-resource-toolbar">
				<label class="e-human-resource-label">Select Team</label>
				<SfToolbar ID="Gantt_Toolbar">
					<ToolbarItems>
						<ToolbarItem>
							<Template>
								<SfDropDownList CssClass="sf-hr-dropdown-list" TValue="string" Value=@(selectedDepartment) TItem="string" DataSource="@HRDepartmentTypes" ValueChanged="DepartmentChangedHandler">
								</SfDropDownList>
							</Template>
						</ToolbarItem>
					</ToolbarItems>
				</SfToolbar>
			</div>
			<div class="e-gantt-human-resource-use-case">
				<SfGantt @ref="GanttChartInstance" DataSource="@TaskCollection" RowHeight="44" IncludeWeekend="true" HighlightWeekends="true" TreeColumnIndex="1" ScrollToTaskbarOnClick="true" Height="530px" Width="100%">
					<GanttTaskFields Id="Id" Name="Subject" StartDate="StartTime" Duration="Duration" EndDate="EndTime" Dependency="DependentId" ParentID="ParentId" Progress="Progress"></GanttTaskFields>
					<GanttColumns>
						<GanttColumn Field="Id" Visible="false"></GanttColumn>
						<GanttColumn Field="Subject" Width="250px" ClipMode="ClipMode.EllipsisWithTooltip"></GanttColumn>
						<GanttColumn Field="Progress" Width="180px">
							<Template>
								@{
									var taskRecord = context as HumanResourceData.RecruitmentPlanModel;
									if (taskRecord == null) return;
									string width = taskRecord.Progress.ToString();
									<div class="e-gantt-progress-custom">
										<div class="sf-grid-progress-outer">
											<div style="width:@(width)px;"></div>
										</div>
										<div class="sf-grid-progress-inner">
											<span>@(taskRecord.Progress)%</span>
										</div>
									</div>
								}
							</Template>
						</GanttColumn>
						<GanttColumn Field="StartTime" HeaderText="Start Date" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Right"></GanttColumn>
						<GanttColumn Field="EndTime" HeaderText="Due Date" TextAlign="Syncfusion.Blazor.Grids.TextAlign.Right"></GanttColumn>
					</GanttColumns>
					<GanttHolidays>
						@{
							foreach (var holiday in HumanResourceData.HolidayCollection)
							{
								<GanttHoliday From="holiday.Date" To="holiday.Date" Label="@holiday.HolidayName"
											  CssClass="e-custom-holiday"></GanttHoliday>
							}
						}
					</GanttHolidays>
					<GanttSplitterSettings Position="50%" Collapsible="true"></GanttSplitterSettings>
					<GanttLabelSettings RightLabel="Subject" TValue="HumanResourceData.RecruitmentPlanModel"></GanttLabelSettings>
					<GanttEvents RowSelected="RowSelectedHandler" DataBound="DataBoundHandler" TValue="HumanResourceData.RecruitmentPlanModel"></GanttEvents>
				</SfGantt>
			</div>
		</div>
		<div class="e-gantt-human-resource-schedule">
			<div style="height:70px;"></div>
			<SfSchedule TValue="HumanResourceData.RecruitmentPlanModel" Readonly="true" Width="100%" Height="530px" AgendaDaysCount="4" @bind-SelectedDate="CurrentDate">
				<ScheduleViews>
					<ScheduleView Option="View.Agenda"></ScheduleView>
				</ScheduleViews>
				<ScheduleEvents OnPopupOpen="PopupHandler" TValue="HumanResourceData.RecruitmentPlanModel"></ScheduleEvents>
				<ScheduleEventSettings AllowEditing="false" EnableTooltip="true" AllowDeleting="false" AllowEditFollowingEvents="false" DataSource="@ScheduleCollection"></ScheduleEventSettings>
			</SfSchedule>
		</div>
	</div>
</section>
@code{
	/// <summary>
	/// Initializes the component, prepares the initial Gantt data, collapses the main layout, captures the current URI, and applies the theme.
	/// </summary>
	protected async override Task OnInitializedAsync()
	{
		TaskCollection = RecruitmentHrCollection;
		MainLayoutInstance.Collapse();
		currentUri = Navigation.Uri;
		UpdateTheme(currentUri);
		@*Hidden:Lines*@
		SampleService.TouchMousePreferenceChanged += OnTouchMousePreferenceChanged;
		@*End:Hidden*@
		await Task.CompletedTask;
	}
	@*Hidden:Lines*@
	private async void OnTouchMousePreferenceChanged()
	{
		await GanttChartInstance.RefreshAsync();
		await GanttChartInstance.CallStateHasChangedAsync();
	}

	public void Dispose()
	{
		SampleService.TouchMousePreferenceChanged -= OnTouchMousePreferenceChanged;
	}
	@*End:Hidden*@
}
<style>
	.container-fluid {
		padding: 0px !important;
	}

	#Gantt_Toolbar {
		padding: 5px 0px;
		display: inline !important;
	}

		#Gantt_Toolbar .e-toolbar-item.e-template {
			margin-left: 0px !important;
		}

	.e-gantt-human-resource-sample .sf-hr-header-container {
		background: rgba(var(--color-sf-primary));
	}

	.sf-hr-header-container h1 {
		font-size: 33px;
		padding: 10px;
		color: #fff;
	}

	.e-gantt-human-resource-sample .sf-gantt-chart-container {
		height: 55%
	}

	.e-gantt-human-resource-sample .sf-schedule-container {
		height: 36%;
	}

	.e-gantt-human-resource-sample .sf-hr-card-container {
		padding: 9px 20px 10px !important;
		background: linear-gradient(0deg, rgba(var(--color-sf-primary), 0.08), rgba(var(--color-sf-primary), 0.08)), rgba(var(--color-sf-surface));
		border: 1px solid lightgray;
		margin: 0px !important;
	}

	.e-gantt-human-resource-sample .sf-hr-card-div {
		padding: 7px 11px 7px 21px !important
	}

	.e-gantt-human-resource-sample .sf-hr-card-btn {
		float: right;
		border-radius: 7px;
		background: rgba(var(--color-sf-primary));
		color: #fff;
		padding: 1px 11px;
		border: none;
	}

	.e-gantt-human-resource-sample .e-input-group.sf-hr-dropdown-list {
		border-radius: 3px;
	}

	.e-gantt-human-resource-sample .e-input-group:not(.e-float-icon-left):not(.e-float-input)::before, .e-input-group:not(.e-float-icon-left):not(.e-float-input)::after {
		background: none !important;
	}

	.e-gantt-human-resource-sample .e-timeline-top-header-cell, .e-columnheader, .e-gridcontent tr:nth-child(even), .e-chart-root-container tr:nth-child(even):not(.e-active) {
		background: rgba(var(--color-sf-primary-container), 0.2) !important;
	}

	.sf-grid-progress-outer div {
		background-color: @ProgressBarColor;
		height: 2px;
		border-radius: 4px;
	}

	.e-gantt-human-resource-sample .fluent2-highcontrast .e-rowcell.e-templatecell.e-active .sf-grid-progress-outer div {
		background-color: #000;
	}

	.e-gantt-human-resource-sample .e-gantt .e-gantt-chart .e-gantt-child-taskbar-inner-div, .e-gantt .e-gantt-chart .e-gantt-child-progressbar-inner-div {
		border-radius: 2px !important;
	}

	#Gantt_Toolbar {
		background: none !important;
		box-shadow: none !important;
	}

		#Gantt_Toolbar .e-toolbar-items {
			background: none !important;
		}

	@@media only screen and (max-width:992px) {
		.e-gantt-human-resource-sample .e-gantt-chart-human-resource {
			width: 100%;
		}

		.e-gantt-human-resource-sample .e-gantt-human-resource-schedule {
			display: none !important;
		}
	}

	.e-gantt-human-resource-sample .e-schedule .e-agenda-view .e-day-border {
		border: none !important;
	}

	.e-gantt-human-resource-sample .e-calendar, .e-bigger .e-calendar {
		min-width: min-content;
		max-width: max-content;
	}

		.e-calendar .e-header .e-title, .e-bigger .e-calendar .e-header .e-title {
			width: fit-content;
			white-space: nowrap;
		}

</style>