@page "/DropDown-List/Virtualization"

@using Syncfusion.Blazor.DropDowns
@using Syncfusion.Blazor.Data

@*Hidden:Lines*@
@inherits SampleBaseComponent
@*End:Hidden*@

<ActionDescription>
<p>This example demonstrates virtualization support in DropDownList for optimized performance with large datasets.</p>

<p>Virtualization features:</p>
<ul>
  <li>Component has 150 items bound to it</li>
  <li>Only few items load based on popup height initially</li>
  <li>Remaining items load on scrolling</li>
  <li>Enable via <a href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.DropDowns.SfDropDownList-2.html#Syncfusion_Blazor_DropDowns_SfDropDownList_2_EnableVirtualization" aria-label="Navigate to EnableVirtualization property">EnableVirtualization</a> property set to <code>true</code></li>
  <li>Improves UI performance for large data</li>
  <li>Works with both local and remote data</li>
</ul>
</ActionDescription>


<div class="col-lg-12 control-section">
    <div class="row">
        <div class="col-lg-6">
            <div class="control-wrapper">
                <label class="example-label">Local Data</label>
                <SfDropDownList TValue="string" TItem="Record" Placeholder="e.g. Item 1" DataSource="@Records" Query="@LocalDataQuery" PopupHeight="130px" EnableVirtualization="true">
                    <DropDownListFieldSettings Text="Text" Value="Id"/>
                </SfDropDownList>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="control-wrapper">
                <label class="example-label">Remote Data</label>
                <SfDropDownList TValue="string" TItem="EmployeeData" PopupHeight="160px" EnableVirtualization="true" AllowFiltering="true" Placeholder="Select a name" Query="@RemoteDataQuery">
                    <SfDataManager Url="https://blazor.syncfusion.com/services/production/api/Employees" Offline="true" CrossDomain="true" Adaptor="Syncfusion.Blazor.Adaptors.WebApiAdaptor"></SfDataManager>
                    <DropDownListFieldSettings Text="FirstName" Value="FirstName" />
                </SfDropDownList>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="control-wrapper">
                <label class="example-label">Grouping</label>
                <SfDropDownList TValue="string" TItem="Record" Placeholder="e.g. Item 1" DataSource="@Records" Query="@LocalDataQuery" PopupHeight="130px" EnableVirtualization="true">
                    <DropDownListFieldSettings GroupBy="Group" Text="Text" Value="Id"/>
                </SfDropDownList>
            </div>
        </div>
    </div>
</div>

@code{
    
    public Query LocalDataQuery = new Query().Take(6); 
    public Query RemoteDataQuery = new Query().Take(6);
    public class Record 
    { 
        public string? Id { get; set; } 
        public string? Text { get; set; } 
        public string? Group { get; set; }
    } 

    public List<Record>? Records { get; set; } 
    public class EmployeeData
    {
        public int EmployeeID { get; set; }
        public string? FirstName { get; set; }
        public string? LastName { get; set; }
        public string? Country { get; set; }
    }
    protected override void OnInitialized()
    {
        var random = new Random();
        this.Records = Enumerable.Range(1, 150).Select(i => new Record()
            {
                Id = i.ToString(),
                Text = "Item " + i,
                Group = GetRandomGroup(random)
            }).ToList();
    }

    private string GetRandomGroup(Random random)
    {
        switch (random.Next(1, 5))
        {
            case 1:
                return "Group A";
            case 2:
                return "Group B";
            case 3:
                return "Group C";
            case 4:
                return "Group D";
            default:
                return string.Empty;
        }
    }
}

<style>
    .control-wrapper {
        max-width: 240px;
        margin: 0 auto;
        padding: 50px 0px 0px;
    }

    .example-label {
        font-size: 14px;
        margin-bottom: 6px;
    }
</style>