@page "/tree-grid/virtual-scrolling"

@using Syncfusion.Blazor.Grids
@using Syncfusion.Blazor.TreeGrid
@*Hidden:Lines*@
@inherits SampleBaseComponent;
@using Virtualdata
@*End:Hidden*@

<ActionDescription>
<p>This sample demonstrates the Tree Grid component with horizontal and vertical scrollbars to efficiently render large datasets using row and column virtualization. Virtualization ensures that only the visible rows and columns are loaded into the DOM, improving performance and responsiveness when working with large data.</p>
    
    <p>To enable virtualization, set the <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.TreeGrid.SfTreeGrid-1.html#Syncfusion_Blazor_TreeGrid_SfTreeGrid_1_EnableVirtualization">EnableVirtualization</a> property to <b>true</b> for row virtualization and the <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.TreeGrid.SfTreeGrid-1.html#Syncfusion_Blazor_TreeGrid_SfTreeGrid_1_EnableColumnVirtualization">EnableColumnVirtualization</a> property to <b>true</b> for column virtualization.</p>
    
    <p>This demo configures the Tree Grid with both row and column virtualization to render "10,000" rows and "20" columns. Scrollbars provide smooth navigation across the extended content without performance degradation. Additional properties such as <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.TreeGrid.SfTreeGrid-1.html#Syncfusion_Blazor_TreeGrid_SfTreeGrid_1_EnableVirtualMaskRow">EnableVirtualMaskRow</a> (to mask rows during data loading) and <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.TreeGrid.SfTreeGrid-1.html#Syncfusion_Blazor_TreeGrid_SfTreeGrid_1_OverscanCount">OverscanCount</a> (to render extra items before and after the visible area) are used to enhance scrolling performance.</p>
    
    <p>More information about virtualization in Tree Grid can be found in this <a target="_blank" rel="noopener" href="https://blazor.syncfusion.com/documentation/treegrid/virtualization">documentation</a> section.</p>
</ActionDescription>





<div class="col-lg-12 control-section">
    <div class="content-wrapper">
        <div class="row">
            <SfTreeGrid DataSource="@TreeGridData" IdMapping="TaskID" ParentIdMapping="ParentID" TreeColumnIndex="1" RowHeight="38" Height="410" Width="auto" EnableVirtualization="true" EnableColumnVirtualization="true" EnableVirtualMaskRow=true OverscanCount="5" Toolbar="@(new List<string>() { "ExpandAll", "CollapseAll" })">
                <TreeGridColumns>
                    <TreeGridColumn Field="TaskID" HeaderText="ID" TextAlign="TextAlign.Right" Width="110" IsPrimaryKey="true" Visible="false"></TreeGridColumn>
                    <TreeGridColumn Field="ResourceId" HeaderText="Resource" Width="270" ClipMode="ClipMode.EllipsisWithTooltip"></TreeGridColumn>
                    <TreeGridColumn Field="Name" HeaderText="Type" Width="140"></TreeGridColumn>
                    <TreeGridColumn Field="ServiceFamily" HeaderText="Service Family" ClipMode="ClipMode.EllipsisWithTooltip" Width="140"></TreeGridColumn>
                    <TreeGridColumn Field="Status" HeaderText="Status" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="Region" HeaderText="Region" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="ResourceGroup" HeaderText="Group" Width="160"></TreeGridColumn>
                    <TreeGridColumn Field="Cpu" HeaderText="CPU (%)" TextAlign="TextAlign.Right" Width="110"></TreeGridColumn>
                    <TreeGridColumn Field="Memory" HeaderText="Memory (%)" TextAlign="TextAlign.Right" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="Disk" HeaderText="Disk (%)" TextAlign="TextAlign.Right" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="NetworkMbps" HeaderText="Network (Mbps)" ClipMode="ClipMode.EllipsisWithTooltip" TextAlign="TextAlign.Right" Width="140"></TreeGridColumn>
                    <TreeGridColumn Field="RequestsPerSec" HeaderText="Requests/sec" TextAlign="TextAlign.Right" Width="150"></TreeGridColumn>
                    <TreeGridColumn Field="ErrorRatePpm" HeaderText="Error Rate (ppm)" TextAlign="TextAlign.Right" Width="160"></TreeGridColumn>
                    <TreeGridColumn Field="StorageGb" HeaderText="Storage (GB)" TextAlign="TextAlign.Right" Width="130"></TreeGridColumn>
                    <TreeGridColumn Field="MonthlyCost" HeaderText="Monthly Cost ($)" TextAlign="TextAlign.Right" Width="100" ClipMode="ClipMode.EllipsisWithTooltip"></TreeGridColumn>
                    <TreeGridColumn Field="InstanceCount" HeaderText="Instances" TextAlign="TextAlign.Right" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="UptimeDays" HeaderText="Uptime (days)" ClipMode="ClipMode.EllipsisWithTooltip" TextAlign="TextAlign.Right" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="TagsCount" HeaderText="Tags" TextAlign="TextAlign.Right" Width="80"></TreeGridColumn>
                    <TreeGridColumn Field="Owner" HeaderText="Owner" Width="110"></TreeGridColumn>
                    <TreeGridColumn Field="Environment" HeaderText="Environment" Width="130"></TreeGridColumn>
                    <TreeGridColumn Field="ComplianceScore" HeaderText="Compliance" ClipMode="ClipMode.EllipsisWithTooltip" TextAlign="TextAlign.Right" Width="120"></TreeGridColumn>
                    <TreeGridColumn Field="Priority" HeaderText="Priority" TextAlign="TextAlign.Right" Width="100"></TreeGridColumn>
                    <TreeGridColumn Field="SecurityFindings" HeaderText="Security Findings" TextAlign="TextAlign.Right" Width="130" clipMode="ClipMode.EllipsisWithTooltip"></TreeGridColumn>
                </TreeGridColumns>
            </SfTreeGrid>
        </div>
    </div>
</div>

<style>
    .visible {
        display: inline-block;
        font-size: inherit;
        color: rgba(0,0,0,1);
    }

    .loading {
        position: absolute;
        height: 92%;
        width: 100%;
        background-color: rgba(1,1,1,0.2);
        z-index: 10000;
        display: flex;
        align-items: center;
        padding-left: 44%;
    }

    .topload {
        font-size: inherit;
    }
</style>

@code {
    private List<VirtualData> TreeGridData { get; set; } = new();

    protected override void OnInitialized()
    {
        TreeGridData = VirtualData.GetTreeVirtualData();
    }
}