@page "/datagrid/grouping"

@using Syncfusion.Blazor.Grids
@using Syncfusion.Blazor.Buttons
@*Hidden:Lines*@
@using BlazorDemos
@using blazor_ordersdata
@inherits SampleBaseComponent
@inject NavigationManager NavigationManager


@*End:Hidden*@

<ActionDescription>
<p>This sample demonstrates the DataGrid grouping feature for organizing and hierarchically displaying records.</p>
  
  <p>The Blazor DataGrid supports record grouping based on specified columns. When grouping is enabled, records are organized hierarchically, allowing users to expand and collapse grouped data. To enable grouping, set the <a target='_blank' href='https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.Grids.SfGrid-1.html#Syncfusion_Blazor_Grids_SfGrid_1_AllowGrouping' aria-label="Navigate to the AllowGrouping property reference for DataGrid component">AllowGrouping</a> property to <strong>true</strong>.</p>
  
  <p>In this demo:</p>
  <ul>
    <li>The DataGrid is initially grouped by the <strong>Customer ID</strong> column</li>
    <li>Columns can be grouped by dragging and dropping column headers into the group drop area</li>
    <li>The <strong>PersistGroupState</strong> option maintains the expand or collapse state during paging, sorting, or filtering</li>
  </ul>
  
  <p>To enable group state persistence across operations, set the <code>PersistGroupState</code> property to <strong>true</strong>. By default, this property is set to <strong>false</strong>.</p>
  
  <p>For more detailed information about grouping, refer to the <a target='_blank' href='https://blazor.syncfusion.com/documentation/datagrid/grouping' aria-label="Navigate to the documentation for grouping in DataGrid component">grouping documentation</a>.</p>
</ActionDescription>


<div class="col-lg-12 control-section">
    <div class="content-wrapper">
        <div class="row">
            <div class="e-switch-control">
                <div>
                    <SfCheckBox LabelPosition="Syncfusion.Blazor.Buttons.LabelPosition.Before" @bind-Checked="isChecked" Label="Group State Persistence" @onchange="onChange"></SfCheckBox>
                </div>
            </div>
            <SfGrid DataSource="@GridData" Height="400" AllowGrouping="true" AllowSorting="true" AllowFiltering="true" Toolbar="@(new List<string>() { "Edit", "Delete", "Update", "Cancel" })" AllowPaging="true">
                <GridEditSettings AllowAdding="true" AllowDeleting="true" AllowEditing="true" ></GridEditSettings>
                <GridGroupSettings Columns="@GroupedColumns" PersistGroupState="@isGroupStatePersistent"></GridGroupSettings>
                <GridFilterSettings Type="FilterType.Menu"></GridFilterSettings>
                <GridColumns>
                    <GridColumn Field=@nameof(Orders.OrderID) IsPrimaryKey="true" HeaderText="Order ID" ValidationRules="@(new ValidationRules{ Required=true, Number=true})" TextAlign="TextAlign.Right" Width="120"></GridColumn>
                    <GridColumn Field=@nameof(Orders.CustomerID) HeaderText="Customer ID" ValidationRules="@(new ValidationRules{ Required=true})" Width="100"></GridColumn>
                    <GridColumn Field=@nameof(Orders.Freight) Format="C2" TextAlign="TextAlign.Right" ValidationRules="@(new ValidationRules{ Required=true, Range = new object[]{1, 1000}})" AllowGrouping=false Width="120"></GridColumn>
                    <GridColumn Field=@nameof(Orders.OrderDate) HeaderText=" Order Date" Format="d" Type="ColumnType.DateOnly" TextAlign="TextAlign.Right" Width="100"></GridColumn>
                    <GridColumn Field=@nameof(Orders.OrderTime) HeaderText="Order Time" Type="ColumnType.TimeOnly" TextAlign="TextAlign.Right" Width="100"></GridColumn>
                </GridColumns>
            </SfGrid>
        </div>
    </div>
</div>

@code{
    public string[] GroupedColumns = new string[] { "CustomerID" };

    public List<Orders>? GridData { get; set; }
    private bool isGroupStatePersistent { get; set; }
    private bool isChecked { get; set; } = false;

    private void onChange(Microsoft.AspNetCore.Components.ChangeEventArgs args)
    {
        if (args.Value != null)
        isGroupStatePersistent = (bool)args.Value;
    }

    protected override void OnInitialized()
    {
        
        GridData = Orders.GetAllRecords();
    }
}
@*Hidden:Lines*@
<style>
    .e-checkbox-wrapper .e-checkbox + .e-label {
        font-weight: 600;
    }

    .fluent2-highcontrast .e-switch-control,
    .fluent2-dark .e-switch-control,
    .fluent2 .e-switch-control {
        padding-bottom: 10px;
        margin-left: -10px;
    }

    .highcontrast .e-switch-control,
    .fluent .e-switch-control,
    .fluent-dark .e-switch-control,
    .material3 .e-switch-control,
    .material3-dark .e-switch-control,
    .bootstrap5\.3 .e-switch-control,
    .bootstrap5\.3-dark .e-switch-control,
    .tailwind3 .e-switch-control,
    .tailwind3-dark .e-switch-control,
    .material .e-switch-control,
    .material-dark .e-switch-control,
    .bootstrap4 .e-switch-control,
    .bootstrap5 .e-switch-control,
    .bootstrap5-dark .e-switch-control,
    .tailwind .e-switch-control,
    .tailwind-dark .e-switch-control,
    .fabric .e-switch-control,
    .fabric-dark .e-switch-control {
        padding-bottom: 10px;
    }
</style>
@*End:Hidden*@