@page "/heatmap-chart/json-row"

@using Syncfusion.Blazor
@using Syncfusion.Blazor.HeatMap
@using sf_blazor_heatmapdata
@inject NavigationManager NavigationManager
@*Hidden:Lines*@
@inherits SampleBaseComponent;
@*End:Hidden*@

<ActionDescription>
<p>This sample visualizes the overall Olympic medals won by countries in all summer Olympic events from 2000 to 2016, using JSON-formatted row data.</p>
    
    <p><strong>JSON Data Binding</strong> - This example demonstrates how to bind <code>JSON</code> data and configure the Heatmap using data adaptor support. You can bind JSON data with information for each row using:</p>
    <ul>
        <li>The <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.HeatMap.HeatMapDataSourceSettings.html#Syncfusion_Blazor_HeatMap_HeatMapDataSourceSettings_IsJsonData" aria-label="Class reference of IsJsonData property in HeatMap Chart">IsJsonData</a> property to enable JSON data mode</li>
        <li>The <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.HeatMap.AdaptorType.html" aria-label="Class reference of AdaptorType property in HeatMap Chart">AdaptorType</a> property to specify the appropriate data adaptor type for row-based data</li>
    </ul>
    
    <p><strong>Row Data Mapping</strong> - For row JSON data, the row header is mapped using the <a target="_blank" rel="noopener" href="https://help.syncfusion.com/cr/blazor/Syncfusion.Blazor.HeatMap.HeatMapDataSourceSettings.html#Syncfusion_Blazor_HeatMap_HeatMapDataSourceSettings_XDataMapping" aria-label="Class reference of XDataMapping property in HeatMap Chart">XDataMapping</a> property, which identifies each row's label or identifier in the JSON structure.</p>
    
    <p><strong>Data Organization</strong> - This row-based approach is ideal when your data is organized with records as rows and properties as columns, making it intuitive for datasets structured around entities or categories.</p>
    
    <p><strong>Interactive Features</strong> - The tooltip is enabled in this example. Hover the mouse over a data point or tap on touch-enabled devices to view medal counts by country and Olympic year.</p>
</ActionDescription>


    <div class="control-section">
        <div class="row">
            <div class="col-md-12">
                <SfHeatMap DataSource="@Data" Theme="@_theme">
                    <HeatMapEvents TooltipRendering="@OnRendering"></HeatMapEvents>
                    <HeatMapTitleSettings Text="Olympic Medal Achievements of most Successful Countries">
                        <HeatMapTitleTextStyle Size="15px" FontWeight="500" FontStyle="Normal" FontFamily="inherit" TextOverflow="TextOverflow.Trim"></HeatMapTitleTextStyle>
                    </HeatMapTitleSettings>
                    <HeatMapDataSourceSettings IsJsonData="true" AdaptorType="AdaptorType.Table" XDataMapping="Region"></HeatMapDataSourceSettings>
                    <HeatMapXAxis Labels="@XLabels" LabelRotation="45" LabelIntersectAction="LabelIntersectAction.None">
                         <HeatMapXAxisTextStyle Color="@AxisLabelColor" FontFamily="inherit"></HeatMapXAxisTextStyle>
                    </HeatMapXAxis>
                    <HeatMapYAxis Labels="@YLabels">
                    <HeatMapYAxisTextStyle Color="@AxisLabelColor" FontFamily="inherit"></HeatMapYAxisTextStyle>
                        <HeatMapYAxisTitle Text="Olympic Year">
                            <HeatMapYAxisTitleTextStyle Color="@AxisLabelColor" Size="15px" FontWeight="500" FontStyle="Normal" FontFamily="inherit"></HeatMapYAxisTitleTextStyle>
                        </HeatMapYAxisTitle>
                    </HeatMapYAxis>
                    <HeatMapPaletteSettings>
                        <HeatMapPalettes>
                            <HeatMapPalette Color="#F0C27B"></HeatMapPalette>
                            <HeatMapPalette Color="#4B1248"></HeatMapPalette>
                        </HeatMapPalettes>
                    </HeatMapPaletteSettings>
                    <HeatMapCellSettings>
                        <HeatMapCellBorder Width="1" Radius="4" Color="White"></HeatMapCellBorder>
                        <HeatMapCellTextStyle FontFamily="inherit"></HeatMapCellTextStyle>
                    </HeatMapCellSettings>
                    <HeatMapLegendSettings>
                        <HeatMapLegendTextStyle FontFamily="inherit"></HeatMapLegendTextStyle>
                    </HeatMapLegendSettings>
                    <HeatMapTooltipSettings>
                        <HeatMapFont FontFamily="inherit"></HeatMapFont>
                    </HeatMapTooltipSettings>
                </SfHeatMap>
            </div>
        </div>
        <div style="float: right; margin-right: 10px;">
            Source:
            <a href="https://en.wikipedia.org/wiki/2016_Summer_Olympics_medal_table" target="_blank" rel="noopener">https://en.wikipedia.org/</a>
        </div>
    </div>

@code
{
    private Theme _theme { get; set; }
    public string AxisLabelColor = "Black";
    public string[] XLabels = new string[] { "China", "France", "GBR", "Germany", "Italy", "Japan", "KOR", "Russia", "USA" };
    public string[] YLabels = new string[] { "Year_2000", "Year_2004", "Year_2008", "Year_2012", "Year_2016"};
    public class HeatmapData
    {
        public string? Region { get; set; }
        public int? Year_2000 { get; set; }
        public int? Year_2004 { get; set; }
        public int? Year_2008 { get; set; }
        public int? Year_2012 { get; set; }
        public int? Year_2016 { get; set; }
    }

    private HeatmapData[] Data = new HeatmapData[]
    {
        new HeatmapData { Region = "USA", Year_2000 = 93, Year_2004 = 101, Year_2008 = 112, Year_2012 = 103, Year_2016 = 121 },
        new HeatmapData { Region = "GBR", Year_2000 = 28, Year_2004 = 30, Year_2008 = 49, Year_2012 = 65, Year_2016 = 67 },
        new HeatmapData { Region = "China", Year_2000 = 58, Year_2004 = 63, Year_2008 = 100, Year_2012 = 91, Year_2016 = 70 },
        new HeatmapData { Region = "Russia", Year_2000 = 89, Year_2004 = 90, Year_2008 = 60, Year_2012 = 69, Year_2016 = 55 },
        new HeatmapData { Region = "Germany", Year_2000 = 56, Year_2004 = 49, Year_2008 = 41, Year_2012 = 44, Year_2016 = 42 },
        new HeatmapData { Region = "Japan", Year_2000 = 18, Year_2004 = 37, Year_2008 = 25, Year_2012 = 38, Year_2016 = 41 },
        new HeatmapData { Region = "France", Year_2000 = 38, Year_2004 = 33, Year_2008 = 43, Year_2012 = 35, Year_2016 = 42 },
        new HeatmapData { Region = "KOR", Year_2000 = 28, Year_2004 = 30, Year_2008 = 32, Year_2012 = 30, Year_2016 = 21 },
        new HeatmapData { Region = "Italy", Year_2000 = 34, Year_2004 = 32, Year_2008 = 27, Year_2012 = 28, Year_2016 = 28 }
    };
    public void OnRendering(TooltipEventArgs args)
    {
        args.Content = new string[] {args.YLabel + " | " + args.XLabel + " : " + args.Value + " Medals "};
    }
    protected override void OnInitialized()
    {
        _theme = HeatmapThemeHelper.GetCurrentHeatmapTheme(NavigationManager.Uri);
        AxisLabelColor = (_theme.ToString().IndexOf("Dark") > -1 || _theme.ToString().IndexOf("HighContrast") > -1) ? "#FFFFFF" : "#000000";
    }
}