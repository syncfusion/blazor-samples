@page "/Diagrams/HistoryManager"

@using Syncfusion.EJ2.Blazor.Diagrams

@*Hidden:Lines*@
@using ej2_blazor_samples
@{
    SampleBrowser.CurrentSampleName = "History Manager";
    SampleBrowser.CurrentControlName = "Diagram";
    SampleBrowser.CurrentControlCategory = "Diagram";
    SampleBrowser.CurrentControl = SampleBrowser.Config.Diagram;
    SampleBrowser.ActionDescription = new string[] {
        @" <p>
            This sample demonstrates viewing, deleting, limiting diagram history and groups diagram actions and stores it as a single entry in the history manager.

        </p>"
    };
    SampleBrowser.Description = new string[] {
       @"<p>
           Diagram history are being handle all the diagram history. Using <code>StackLimit</code> property of the history manager
        we limit the no. of entries can be stored on the diagram history. Also, we can get the list of entries in the undo
        list and redo list using <code>UndoStack</code> and <code>RedoStack</code>. Also diagram history manager have the
        option to group the action as the single entry by the help of the <code>StartGroupAction</code> and <code>EndGroupAction</code>        public Api. Also, we can add the custom entries to the diagram history.
    </p>
        <br>"
    };
}
@*End:Hidden*@

    <div class="control-section">
        <EjsDiagram Width="100%" Height="600px">
            <DiagramSnapSettings Constraints="@SnapConstraints.None">
            </DiagramSnapSettings>
            <DiagramNodes>
                <DiagramNode Id="node1" OffsetX="400" OffsetY="30" Width="70" Height="40">
                    <NodeShapeStyle Fill="#FFB2B2" StrokeColor="#FFB2B2"></NodeShapeStyle>
                    <DiagramFlowShape Shape="@FlowShapes.Terminator" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="Start">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                </DiagramNode>
                <DiagramNode Id="node2" OffsetX="400" OffsetY="100">
                    <DiagramFlowShape Shape="@FlowShapes.Process" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <NodeShapeStyle Fill="#DCDCDC" StrokeColor="#DCDCDC"></NodeShapeStyle>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="Design">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                    <DiagramPorts>
                        <DiagramPort Id="designPort">
                            <NodePortOffset X="0.01" Y="0.5"></NodePortOffset>
                        </DiagramPort>
                    </DiagramPorts>
                </DiagramNode>
                <DiagramNode Id="node3" OffsetX="400" OffsetY="180">
                    <DiagramFlowShape Shape="@FlowShapes.Process" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <NodeShapeStyle Fill="#DCDCDC" StrokeColor="#DCDCDC"></NodeShapeStyle>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="Coding">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                    <DiagramPorts>
                        <DiagramPort Id="codingPort">
                            <NodePortOffset X="0.01" Y="0.5"></NodePortOffset>
                        </DiagramPort>
                    </DiagramPorts>
                </DiagramNode>
                <DiagramNode Id="node4" OffsetX="400" OffsetY="260">
                    <DiagramFlowShape Shape="@FlowShapes.Process" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <NodeShapeStyle Fill="#DCDCDC" StrokeColor="#DCDCDC"></NodeShapeStyle>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="Testing">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                </DiagramNode>
                <DiagramNode Id="node5" OffsetX="400" OffsetY="340" Width="80" Height="60">
                    <DiagramFlowShape Shape="@FlowShapes.Decision" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <NodeShapeStyle Fill="#A2D8B0" StrokeColor="#A2D8B0"></NodeShapeStyle>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="Errors?">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                </DiagramNode>
                <DiagramNode Id="node6" OffsetX="400" OffsetY="430" Width="70" Height="40">
                    <DiagramFlowShape Shape="@FlowShapes.Terminator" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <NodeShapeStyle Fill="#FFB2B2" StrokeColor="#FFB2B2"></NodeShapeStyle>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="End">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                </DiagramNode>
                <DiagramNode Id="node7" OffsetX="220" OffsetY="180" Width="100" Height="60">
                    <DiagramFlowShape Shape="@FlowShapes.Decision" Type="@Syncfusion.EJ2.Blazor.Diagrams.Shapes.Flow"></DiagramFlowShape>
                    <NodeShapeStyle Fill="#A2D8B0" StrokeColor="#A2D8B0"></NodeShapeStyle>
                    <DiagramNodeAnnotations>
                        <DiagramNodeAnnotation Id="label1" Content="Design Error?">
                            <NodeAnnotationStyle Color="#111111"></NodeAnnotationStyle>
                        </DiagramNodeAnnotation>
                    </DiagramNodeAnnotations>
                    <DiagramPorts>
                        <DiagramPort Id="porterror">
                            <NodePortOffset X="0.5" Y="0.01"></NodePortOffset>
                        </DiagramPort>
                        <DiagramPort Id="portcoding">
                            <NodePortOffset X="1" Y="0.5"></NodePortOffset>
                        </DiagramPort>
                        <DiagramPort Id="portdesign">
                            <NodePortOffset X="0.5" Y="1"></NodePortOffset>
                        </DiagramPort>
                    </DiagramPorts>
                </DiagramNode>
            </DiagramNodes>
            <DiagramConnectors>
                <DiagramConnector Id="connector1" SourceID="node1" TargetID="node2">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                </DiagramConnector>
                <DiagramConnector Id="connector2" SourceID="node2" TargetID="node3">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                </DiagramConnector>
                <DiagramConnector Id="connector3" SourceID="node3" TargetID="node4">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                </DiagramConnector>
                <DiagramConnector Id="connector4" SourceID="node4" TargetID="node5">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                </DiagramConnector>
                <DiagramConnector Id="connector5" SourceID="node5" TargetID="node6">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                    <DiagramConnectorAnnotations>
                        <DiagramConnectorAnnotation Content="No">
                            <ConnectorAnnotationStyle Fill="white"></ConnectorAnnotationStyle>
                        </DiagramConnectorAnnotation>
                    </DiagramConnectorAnnotations>
                </DiagramConnector>
                <DiagramConnector Id="connector6" SourceID="node5" TargetID="node7" Type="@Segments.Orthogonal" Segments="@orthoSegment1">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                    <DiagramConnectorAnnotations>
                        <DiagramConnectorAnnotation Content="Yes">
                            <ConnectorAnnotationStyle Fill="white"></ConnectorAnnotationStyle>
                        </DiagramConnectorAnnotation>
                    </DiagramConnectorAnnotations>
                </DiagramConnector>
                <DiagramConnector Id="connector7" SourceID="node7" TargetID="node3" SourcePortID="portcoding" TargetPortID="codingPort" Type="@Segments.Orthogonal" Segments="@orthoSegment2">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                    <DiagramConnectorAnnotations>
                        <DiagramConnectorAnnotation Content="No">
                            <ConnectorAnnotationStyle Fill="white"></ConnectorAnnotationStyle>
                        </DiagramConnectorAnnotation>
                    </DiagramConnectorAnnotations>
                </DiagramConnector>
                <DiagramConnector Id="connector8" SourceID="node7" TargetID="node2" SourcePortID="porterror" TargetPortID="designPort" Type="@Segments.Orthogonal">
                    <ConnectorShapeStyle Fill="#707070"></ConnectorShapeStyle>
                    <ConnectorTargetDecorator Shape="@DecoratorShapes.Arrow">
                        <DecoratorShapeStyle Fill="#707070" StrokeColor="#707070"></DecoratorShapeStyle>
                    </ConnectorTargetDecorator>
                    <DiagramConnectorAnnotations>
                        <DiagramConnectorAnnotation Content="Yes">
                            <ConnectorAnnotationStyle Fill="white"></ConnectorAnnotationStyle>
                        </DiagramConnectorAnnotation>
                    </DiagramConnectorAnnotations>
                </DiagramConnector>
            </DiagramConnectors>
        </EjsDiagram> 
    </div>

 @code{
private List<object> orthoSegment1 { get; set; } = new List<object>{
        new  { direction= "Left", type= "Orthogonal", length= 150 }
    }; 
     private List<object> orthoSegment2 { get; set; } = new List<object>{
        new  { direction= "Left", type= "Orthogonal", length= 10 }
    }; 
}